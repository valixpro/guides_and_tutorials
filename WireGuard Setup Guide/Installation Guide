Вот — полностью готовый **WireGuard Setup Guide** в **GitHub-Flavored Markdown (GFM)**.
Ты можешь **скопировать и вставить прямо в GitHub**, и всё будет выделено правильно.

---

# WireGuard Setup Guide

This is a step-by-step guide to setting up a WireGuard VPN server on Ubuntu (works on Hetzner, Contabo, DigitalOcean, etc.).

---

## **Prerequisites**

* Ubuntu server (20.04+ recommended)
* Root or sudo access
* For Hetzner: routing fix in step **13**

---

## **1. Update the system**

```bash
sudo apt update && sudo apt upgrade -y
```

---

## **2. Install WireGuard**

```bash
sudo apt install -y wireguard
```

---

## **3. Generate server keys**

```bash
wg genkey | tee server_private.key | wg pubkey > server_public.key
```

---

## **4. View server keys**

```bash
cat server_private.key
cat server_public.key
```

---

## **5. Generate client keys**

```bash
wg genkey | tee client_private.key | wg pubkey > client_public.key
```

---

## **6. View client keys**

```bash
cat client_private.key
cat client_public.key
```

---

## **7. Create server config**

```bash
sudo nano /etc/wireguard/wg0.conf
```

Paste:

```
[Interface]
Address = 10.10.0.1/24
SaveConfig = false
ListenPort = 51820
PrivateKey = SERVER_PRIVATE_KEY

PostUp   = iptables -A FORWARD -i wg0 -j ACCEPT; iptables -A FORWARD -o wg0 -j ACCEPT; iptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE
PostDown = iptables -D FORWARD -i wg0 -j ACCEPT; iptables -D FORWARD -o wg0 -j ACCEPT; iptables -t nat -D POSTROUTING -o eth0 -j MASQUERADE

[Peer]
PublicKey = CLIENT_PUBLIC_KEY
AllowedIPs = 10.10.0.2/32
```

*Save and exit (Ctrl+O, Enter, Ctrl+X).*

---

## **8. Enable IP forwarding**

```bash
echo "net.ipv4.ip_forward=1" | sudo tee -a /etc/sysctl.conf
sudo sysctl -p
```

---

## **9. Start WireGuard**

```bash
sudo systemctl start wg-quick@wg0
sudo systemctl enable wg-quick@wg0
```

---

## **10. Check status**

```bash
sudo wg show
```

---

## **11. Create client config**

```bash
nano client.conf
```

Paste:

```
[Interface]
PrivateKey = CLIENT_PRIVATE_KEY
Address = 10.10.0.2/24
DNS = 1.1.1.1

[Peer]
PublicKey = SERVER_PUBLIC_KEY
Endpoint = YOUR_SERVER_IP:51820
AllowedIPs = 10.10.0.0/24
PersistentKeepalive = 25
```

*Save and exit.*

---

## **12. Generate QR code (for mobile)**

```bash
sudo apt install qrencode -y
qrencode -t ansiutf8 < client.conf
```

---

## **13. Add routing (Hetzner requirement)**

```bash
sudo ip route add 10.10.0.0/24 dev wg0
```

(If you get *"File exists"* — ignore.)

---

## **14. Open WireGuard port in UFW**

```bash
sudo ufw allow 51820/udp
sudo ufw reload
sudo ufw status
```

---

## **15. Restart WireGuard + check status**

```bash
sudo systemctl restart wg-quick@wg0
sudo wg show
```

---

## **Notes**

* **Never share your private keys**
* For multiple clients → add more `[Peer]` sections to `wg0.conf`
* Troubleshooting logs:

  ```bash
  journalctl -u wg-quick@wg0 -f
  ```
* Import `client.conf` into WireGuard app on Windows/macOS/Linux/Android/iOS

---

Если хочешь — могу сделать авто-генерацию README.md или оформить тебе красивую GitHub-страницу.

